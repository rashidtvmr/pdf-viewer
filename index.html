<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>PDF Viewer Support & Render Timing</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 1rem;
    }
    .log-box {
      background: #f9f9f9;
      padding: 1rem;
      margin-bottom: 1.5rem;
      border-left: 5px solid #ccc;
      border-radius: 8px;
      font-family: monospace;
      white-space: pre-wrap;
    }
    embed, iframe {
      width: 100%;
      height: 400px;
      border: 1px solid #aaa;
      margin-bottom: 2rem;
    }
  </style>

  <!-- âœ… Modernizr CDN -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"></script>
</head>
<body>
  <h1>PDF Native Viewer Render + Modernizr Check</h1>

  <h2>ğŸ§  Modernizr PDF Support Check</h2>
  <div id="log-modernizr" class="log-box">Checking...</div>

  <h2>1. &lt;embed&gt; PDF Viewer</h2>
  <div id="log-embed" class="log-box">Initializing...</div>
  <embed id="pdfEmbed" type="application/pdf" />

  <h2>2. &lt;iframe&gt; PDF Viewer</h2>
  <div id="log-iframe" class="log-box">Initializing...</div>
  <iframe id="pdfIframe" title="PDF Viewer"></iframe>

  <script>
    const PDF_URL = "https://rashidtvmrpersonalbucket.s3.eu-north-1.amazonaws.com/rashidester2.pdf"
    const startTime = performance.now();

    const embed = document.getElementById('pdfEmbed');
    const iframe = document.getElementById('pdfIframe');

    const logModernizr = document.getElementById('log-modernizr');
    const logEmbed = document.getElementById('log-embed');
    const logIframe = document.getElementById('log-iframe');

    const createLogger = (logBox) => {
      const log = [];
      return (msg) => {
        const time = (performance.now() - startTime).toFixed(2);
        log.push(`[${time}ms] ${msg}`);
        logBox.textContent = log.join('\n');
      };
    };

    const logM = createLogger(logModernizr);
    const logE = createLogger(logEmbed);
    const logI = createLogger(logIframe);

    // ===== âœ… Modernizr PDF Support Check =====
    setTimeout(() => {
      const supported = Modernizr.pdf;
      logM(`Modernizr check: ${supported ? 'âœ… PDF supported natively' : 'âŒ PDF not supported natively'}`);
    }, 0); // Ensure Modernizr has loaded

    // ===== ğŸ“„ <embed> PDF Test =====
    logE('â³ <embed> load started');
    embed.src = PDF_URL;

    let embedRenderCheck = setTimeout(() => {
      if (embed.clientHeight > 50 && embed.clientWidth > 50) {
        logE('âœ… <embed> appears to be rendered');
      } else {
        logE('âŒ <embed> failed or not visible (zero size)');
      }
    }, 1000);

    embed.onerror = () => {
      clearTimeout(embedRenderCheck);
      logE('âŒ <embed> onError triggered â€” load failed');
    };

    // ===== ğŸ“„ <iframe> PDF Test =====
    logI('â³ <iframe> load started');
    iframe.src = PDF_URL;

    iframe.onload = () => {
      logI('âœ… <iframe> onLoad triggered â€” PDF loaded');
    };

    iframe.onerror = () => {
      logI('âŒ <iframe> onError triggered â€” load failed');
    };

    let iframeRenderCheck = setTimeout(() => {
      if (iframe.clientHeight > 50 && iframe.clientWidth > 50) {
        logI('âœ… <iframe> is visible â€” rendering likely');
      } else {
        logI('âŒ <iframe> failed or invisible (zero size)');
      }
    }, 1000);
  </script>
</body>
</html>
